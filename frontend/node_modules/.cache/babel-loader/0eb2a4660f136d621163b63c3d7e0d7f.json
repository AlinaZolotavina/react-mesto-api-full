{"ast":null,"code":"import _classCallCheck from\"C:/Users/\\u0410\\u043B\\u0438\\u043D\\u0430/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/\\u0410\\u043B\\u0438\\u043D\\u0430/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(data){_classCallCheck(this,Api);this._serverUrl=data.serverUrl;this._token=data.token;}_createClass(Api,[{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return res.json();}else{return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}}},{key:\"getInitialCards\",value:function getInitialCards(){var _this=this;return fetch(\"\".concat(this._serverUrl,\"cards\"),{headers:{authorization:this._token}}).then(function(res){return _this._checkResponse(res);});}},{key:\"addCard\",value:function addCard(data){var _this2=this;return fetch(\"\".concat(this._serverUrl,\"cards\"),{method:'POST',headers:{authorization:this._token,'Content-Type':'application/json'},body:JSON.stringify({name:data.name,link:data.link})}).then(function(res){return _this2._checkResponse(res);});}},{key:\"deleteCard\",value:function deleteCard(data){var _this3=this;return fetch(\"\".concat(this._serverUrl,\"cards/\").concat(data),{method:'DELETE',headers:{authorization:this._token}}).then(function(res){return _this3._checkResponse(res);});}},{key:\"getUserData\",value:function getUserData(){var _this4=this;return fetch(\"\".concat(this._serverUrl,\"users/me\"),{headers:{authorization:this._token}}).then(function(res){return _this4._checkResponse(res);});}},{key:\"changeUserData\",value:function changeUserData(data){var _this5=this;return fetch(\"\".concat(this._serverUrl,\"users/me\"),{method:'PATCH',headers:{authorization:this._token,'Content-Type':'application/json'},body:JSON.stringify({name:data.name,about:data.about})}).then(function(res){return _this5._checkResponse(res);});}},{key:\"changeAvatar\",value:function changeAvatar(data){var _this6=this;return fetch(\"\".concat(this._serverUrl,\"users/me/avatar\"),{method:'PATCH',headers:{authorization:this._token,'Content-Type':'application/json'},body:JSON.stringify({avatar:data.avatar})}).then(function(res){return _this6._checkResponse(res);});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(data,isLiked){var _this7=this;if(!isLiked){return fetch(\"\".concat(this._serverUrl,\"cards/\").concat(data,\"/likes\"),{method:'PUT',headers:{authorization:this._token,'Content-Type':'application/json'}}).then(function(res){return _this7._checkResponse(res);});}else{return fetch(\"\".concat(this._serverUrl,\"cards/\").concat(data,\"/likes\"),{method:'DELETE',headers:{authorization:this._token}}).then(function(res){return _this7._checkResponse(res);});}}},{key:\"getInitialData\",value:function getInitialData(){return Promise.all([this.getUserData(),this.getInitialCards()]);}}]);return Api;}();var api=new Api({serverUrl:'https://mesto.nomoreparties.co/v1/cohort-40/',token:'c4f5357d-335f-4f00-b321-6e024ea9f5d9'});export default api;","map":{"version":3,"names":["Api","data","_serverUrl","serverUrl","_token","token","res","ok","json","Promise","reject","status","fetch","headers","authorization","then","_checkResponse","method","body","JSON","stringify","name","link","about","avatar","isLiked","all","getUserData","getInitialCards","api"],"sources":["C:/Users/Алина/dev/mesto-react/src/utils/api.js"],"sourcesContent":["class Api {\n  constructor(data) {\n    this._serverUrl = data.serverUrl;\n    this._token = data.token;\n  }\n\n  _checkResponse(res) {\n    if(res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  getInitialCards() {\n    return fetch(`${this._serverUrl}cards`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then((res) => this._checkResponse(res));\n  }\n\n  addCard(data) {\n    return fetch(`${this._serverUrl}cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    })\n    .then((res) => this._checkResponse(res));\n  }\n\n  deleteCard(data) {\n    return fetch(`${this._serverUrl}cards/${data}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token,\n      }\n    })\n    .then((res) => this._checkResponse(res));\n  }\n\n  getUserData() {\n    return fetch(`${this._serverUrl}users/me`, {\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then((res) => this._checkResponse(res));\n  }\n\n  changeUserData(data) {\n    return fetch(`${this._serverUrl}users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    })\n    .then((res) => this._checkResponse(res));\n  }\n\n  changeAvatar(data) {\n    return fetch(`${this._serverUrl}users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: data.avatar\n      })\n    })\n    .then((res) => this._checkResponse(res));\n  }\n\n  changeLikeCardStatus(data, isLiked) {\n    if (!isLiked) {\n      return fetch(`${this._serverUrl}cards/${data}/likes`, {\n        method: 'PUT',\n        headers: {\n          authorization: this._token,\n          'Content-Type': 'application/json'\n        }\n      })\n      .then((res) => this._checkResponse(res));\n    } else {\n      return fetch(`${this._serverUrl}cards/${data}/likes`, {\n        method: 'DELETE',\n        headers: {\n          authorization: this._token\n        }\n      })\n      .then((res) => this._checkResponse(res));\n    }\n  }\n\n  getInitialData() {\n    return Promise.all([this.getUserData(), this.getInitialCards()]);\n  }\n}\n\nconst api = new Api({\n  serverUrl: 'https://mesto.nomoreparties.co/v1/cohort-40/',\n  token: 'c4f5357d-335f-4f00-b321-6e024ea9f5d9',\n});\n\nexport default api;"],"mappings":"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"},"metadata":{},"sourceType":"module"}