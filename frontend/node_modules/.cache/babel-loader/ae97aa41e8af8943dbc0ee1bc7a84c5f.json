{"ast":null,"code":"import _toConsumableArray from\"C:/Users/\\u0410\\u043B\\u0438\\u043D\\u0430/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/\\u0410\\u043B\\u0438\\u043D\\u0430/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{CurrentUserContext}from'../contexts/CurrentUserContext';import Header from'../components/Header';import Main from'../components/Main';import Footer from'../components/Footer';import EditProfilePopup from'./EditProfilePopup';import EditAvatarPopup from'./EditAvatarPopup';import AddPlacePopup from'./AddPlacePopup';import DeleteCardPopup from'./DeleteCardPopup';import ImagePopup from'./ImagePopup';import api from'../utils/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];React.useEffect(function(){api.getUserData().then(function(data){setCurrentUser(data);}).catch(function(err){return console.log(err);});},[]);var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),cards=_React$useState2[0],setCards=_React$useState2[1];React.useEffect(function(){api.getInitialCards().then(function(data){setCards(data);}).catch(function(err){return console.log(err);});},[]);var currentDate=new Date();var currentYear=currentDate.getFullYear();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isEditProfilePopupOpen=_useState4[0],setEditProfilePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAddPhotoPopupOpen=_useState6[0],setAddPhotoPopupOpen=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isDeleteCardPopupOpen=_useState8[0],setDeleteCardPopupOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isEditAvatarPopupOpen=_useState10[0],setEditAvatarPopupOpen=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),selectedCard=_useState12[0],setSelectedCard=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isImagePopupOpen=_useState14[0],setImagePopupOpen=_useState14[1];function handleEditProfilePopupOpen(){setEditProfilePopupOpen(!isEditProfilePopupOpen);}function handleAddPhotoPopupOpen(){setAddPhotoPopupOpen(!isAddPhotoPopupOpen);}function handleDeleteCardPopupOpen(card){setDeleteCardPopupOpen(!isDeleteCardPopupOpen);setSelectedCard(card);}function handleEditAvatarPopupOpen(){setEditAvatarPopupOpen(!isEditAvatarPopupOpen);}function handleCardClick(card){setImagePopupOpen(!isImagePopupOpen);setSelectedCard(card);}function handleCardLike(id,isLiked){api.changeLikeCardStatus(id,isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===id?newCard:c;});});}).catch(function(err){return console.log(err);});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){setCards(function(state){return state.filter(function(c){return c._id!==card._id&&c;});});}).catch(function(err){return console.log(err);});closeAllPopups();}function closeAllPopups(){setEditProfilePopupOpen(false);setAddPhotoPopupOpen(false);setDeleteCardPopupOpen(false);setEditAvatarPopupOpen(false);setImagePopupOpen(false);setSelectedCard({});}function handleUpdateUser(data){api.changeUserData(data).then(function(data){setCurrentUser(data);}).catch(function(err){return console.log(err);});closeAllPopups();};function handleUpdateAvatar(data){api.changeAvatar(data).then(function(data){setCurrentUser(data);}).catch(function(err){return console.log(err);});closeAllPopups();}function handleAddPlaceSubmit(newCard){api.addCard(newCard).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));}).catch(function(err){return console.log(err);});closeAllPopups();}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"page__container\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cards,onEditProfile:handleEditProfilePopupOpen,onAddPlace:handleAddPhotoPopupOpen,onEditAvatar:handleEditAvatarPopupOpen,onCardClick:handleCardClick,onDeleteBtnClick:handleDeleteCardPopupOpen,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Footer,{year:currentYear}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPhotoPopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(DeleteCardPopup,{card:selectedCard,isOpen:isDeleteCardPopupOpen,onClose:closeAllPopups,onDeleteCard:handleCardDelete}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,isOpen:isImagePopupOpen,onClose:closeAllPopups})]})});}export default App;","map":{"version":3,"names":["React","useState","CurrentUserContext","Header","Main","Footer","EditProfilePopup","EditAvatarPopup","AddPlacePopup","DeleteCardPopup","ImagePopup","api","App","currentUser","setCurrentUser","useEffect","getUserData","then","data","catch","err","console","log","cards","setCards","getInitialCards","currentDate","Date","currentYear","getFullYear","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPhotoPopupOpen","setAddPhotoPopupOpen","isDeleteCardPopupOpen","setDeleteCardPopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","selectedCard","setSelectedCard","isImagePopupOpen","setImagePopupOpen","handleEditProfilePopupOpen","handleAddPhotoPopupOpen","handleDeleteCardPopupOpen","card","handleEditAvatarPopupOpen","handleCardClick","handleCardLike","id","isLiked","changeLikeCardStatus","newCard","state","map","c","_id","handleCardDelete","deleteCard","filter","closeAllPopups","handleUpdateUser","changeUserData","handleUpdateAvatar","changeAvatar","handleAddPlaceSubmit","addCard"],"sources":["C:/Users/Алина/dev/mesto-react/src/components/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport Header from '../components/Header';\nimport Main from '../components/Main';\nimport Footer from '../components/Footer';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport DeleteCardPopup from './DeleteCardPopup';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState({});\n\n  React.useEffect(() => {\n    api.getUserData()\n    .then(data => {\n      setCurrentUser(data);\n    })\n    .catch((err) => console.log(err));\n  }, []);\n\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    api.getInitialCards()\n    .then(data => {\n      setCards(data);\n    })\n    .catch((err) => console.log(err));\n  }, []);\n\n  const currentDate = new Date();\n  const currentYear = currentDate.getFullYear();\n\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n  const [isAddPhotoPopupOpen, setAddPhotoPopupOpen] = useState(false);\n  const [isDeleteCardPopupOpen, setDeleteCardPopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState({})\n  const [isImagePopupOpen, setImagePopupOpen] = useState(false);\n\n  function handleEditProfilePopupOpen() {\n    setEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n\n  function handleAddPhotoPopupOpen() {\n    setAddPhotoPopupOpen(!isAddPhotoPopupOpen);\n  }\n\n  function handleDeleteCardPopupOpen(card) {\n    setDeleteCardPopupOpen(!isDeleteCardPopupOpen);\n    setSelectedCard(card);\n  }\n\n  function handleEditAvatarPopupOpen() {\n    setEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n\n  function handleCardClick(card) {\n    setImagePopupOpen(!isImagePopupOpen);\n    setSelectedCard(card);\n  }\n\n  function handleCardLike(id, isLiked) {\n    api.changeLikeCardStatus(id, isLiked).then((newCard) => {\n      setCards((state) => state.map((c) => c._id === id ? newCard : c));\n    })\n    .catch((err) => console.log(err));\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id).then(() => {\n      setCards((state) => state.filter((c) => c._id !== card._id && c))\n    })\n    .catch((err) => console.log(err));\n    closeAllPopups();\n  }\n\n  function closeAllPopups() {\n    setEditProfilePopupOpen(false);\n    setAddPhotoPopupOpen(false);\n    setDeleteCardPopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setImagePopupOpen(false);\n    setSelectedCard({});\n  }\n\n  function handleUpdateUser(data) {\n    api.changeUserData(data)\n    .then(data => {\n      setCurrentUser(data)       \n    })\n    .catch((err) => console.log(err));\n    closeAllPopups();\n  };\n\n  function handleUpdateAvatar(data) {\n    api.changeAvatar(data)\n    .then(data => {\n      setCurrentUser(data)\n    })\n    .catch((err) => console.log(err));\n    closeAllPopups();\n  }\n\n  function handleAddPlaceSubmit(newCard) {\n    api.addCard(newCard)\n    .then(newCard => {\n      setCards([newCard, ...cards]);\n    })\n    .catch((err) => console.log(err));\n    closeAllPopups();\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page__container\">\n        <Header />\n        <Main \n          cards={cards}\n          onEditProfile={handleEditProfilePopupOpen}\n          onAddPlace={handleAddPhotoPopupOpen}\n          onEditAvatar={handleEditAvatarPopupOpen}\n          onCardClick={handleCardClick}\n          onDeleteBtnClick={handleDeleteCardPopupOpen}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n        />          \n        <Footer \n          year={currentYear}\n        />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <AddPlacePopup \n          isOpen={isAddPhotoPopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n\n        <DeleteCardPopup\n          card={selectedCard}\n          isOpen={isDeleteCardPopupOpen}\n          onClose={closeAllPopups}\n          onDeleteCard={handleCardDelete}\n        />\n\n        <EditAvatarPopup \n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n        \n        <ImagePopup \n          card={selectedCard}\n          isOpen={isImagePopupOpen}\n          onClose={closeAllPopups}\n        />               \n      </div>\n    </CurrentUserContext.Provider>\n  )\n}\n\nexport default App;\n"],"mappings":"kSAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,kBAAT,KAAmC,gCAAnC,CACA,MAAOC,OAAP,KAAmB,sBAAnB,CACA,MAAOC,KAAP,KAAiB,oBAAjB,CACA,MAAOC,OAAP,KAAmB,sBAAnB,CACA,MAAOC,iBAAP,KAA6B,oBAA7B,CACA,MAAOC,gBAAP,KAA4B,mBAA5B,CACA,MAAOC,cAAP,KAA0B,iBAA1B,CACA,MAAOC,gBAAP,KAA4B,mBAA5B,CACA,MAAOC,WAAP,KAAuB,cAAvB,CACA,MAAOC,IAAP,KAAgB,cAAhB,C,wFAEA,QAASC,IAAT,EAAe,CACb,cAAsCX,QAAQ,CAAC,EAAD,CAA9C,wCAAOY,WAAP,eAAoBC,cAApB,eAEAd,KAAK,CAACe,SAAN,CAAgB,UAAM,CACpBJ,GAAG,CAACK,WAAJ,GACCC,IADD,CACM,SAAAC,IAAI,CAAI,CACZJ,cAAc,CAACI,IAAD,CAAd,CACD,CAHD,EAICC,KAJD,CAIO,SAACC,GAAD,QAASC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAJP,EAKD,CAND,CAMG,EANH,EAQA,oBAA0BpB,KAAK,CAACC,QAAN,CAAe,EAAf,CAA1B,oDAAOsB,KAAP,qBAAcC,QAAd,qBAEAxB,KAAK,CAACe,SAAN,CAAgB,UAAM,CACpBJ,GAAG,CAACc,eAAJ,GACCR,IADD,CACM,SAAAC,IAAI,CAAI,CACZM,QAAQ,CAACN,IAAD,CAAR,CACD,CAHD,EAICC,KAJD,CAIO,SAACC,GAAD,QAASC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAJP,EAKD,CAND,CAMG,EANH,EAQA,GAAMM,YAAW,CAAG,GAAIC,KAAJ,EAApB,CACA,GAAMC,YAAW,CAAGF,WAAW,CAACG,WAAZ,EAApB,CAEA,eAA0D5B,QAAQ,CAAC,KAAD,CAAlE,yCAAO6B,sBAAP,eAA+BC,uBAA/B,eACA,eAAoD9B,QAAQ,CAAC,KAAD,CAA5D,yCAAO+B,mBAAP,eAA4BC,oBAA5B,eACA,eAAwDhC,QAAQ,CAAC,KAAD,CAAhE,yCAAOiC,qBAAP,eAA8BC,sBAA9B,eACA,eAAwDlC,QAAQ,CAAC,KAAD,CAAhE,0CAAOmC,qBAAP,gBAA8BC,sBAA9B,gBACA,gBAAwCpC,QAAQ,CAAC,EAAD,CAAhD,2CAAOqC,YAAP,gBAAqBC,eAArB,gBACA,gBAA8CtC,QAAQ,CAAC,KAAD,CAAtD,2CAAOuC,gBAAP,gBAAyBC,iBAAzB,gBAEA,QAASC,2BAAT,EAAsC,CACpCX,uBAAuB,CAAC,CAACD,sBAAF,CAAvB,CACD,CAED,QAASa,wBAAT,EAAmC,CACjCV,oBAAoB,CAAC,CAACD,mBAAF,CAApB,CACD,CAED,QAASY,0BAAT,CAAmCC,IAAnC,CAAyC,CACvCV,sBAAsB,CAAC,CAACD,qBAAF,CAAtB,CACAK,eAAe,CAACM,IAAD,CAAf,CACD,CAED,QAASC,0BAAT,EAAqC,CACnCT,sBAAsB,CAAC,CAACD,qBAAF,CAAtB,CACD,CAED,QAASW,gBAAT,CAAyBF,IAAzB,CAA+B,CAC7BJ,iBAAiB,CAAC,CAACD,gBAAF,CAAjB,CACAD,eAAe,CAACM,IAAD,CAAf,CACD,CAED,QAASG,eAAT,CAAwBC,EAAxB,CAA4BC,OAA5B,CAAqC,CACnCvC,GAAG,CAACwC,oBAAJ,CAAyBF,EAAzB,CAA6BC,OAA7B,EAAsCjC,IAAtC,CAA2C,SAACmC,OAAD,CAAa,CACtD5B,QAAQ,CAAC,SAAC6B,KAAD,QAAWA,MAAK,CAACC,GAAN,CAAU,SAACC,CAAD,QAAOA,EAAC,CAACC,GAAF,GAAUP,EAAV,CAAeG,OAAf,CAAyBG,CAAhC,EAAV,CAAX,EAAD,CAAR,CACD,CAFD,EAGCpC,KAHD,CAGO,SAACC,GAAD,QAASC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAHP,EAID,CAED,QAASqC,iBAAT,CAA0BZ,IAA1B,CAAgC,CAC9BlC,GAAG,CAAC+C,UAAJ,CAAeb,IAAI,CAACW,GAApB,EAAyBvC,IAAzB,CAA8B,UAAM,CAClCO,QAAQ,CAAC,SAAC6B,KAAD,QAAWA,MAAK,CAACM,MAAN,CAAa,SAACJ,CAAD,QAAOA,EAAC,CAACC,GAAF,GAAUX,IAAI,CAACW,GAAf,EAAsBD,CAA7B,EAAb,CAAX,EAAD,CAAR,CACD,CAFD,EAGCpC,KAHD,CAGO,SAACC,GAAD,QAASC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAHP,EAIAwC,cAAc,GACf,CAED,QAASA,eAAT,EAA0B,CACxB7B,uBAAuB,CAAC,KAAD,CAAvB,CACAE,oBAAoB,CAAC,KAAD,CAApB,CACAE,sBAAsB,CAAC,KAAD,CAAtB,CACAE,sBAAsB,CAAC,KAAD,CAAtB,CACAI,iBAAiB,CAAC,KAAD,CAAjB,CACAF,eAAe,CAAC,EAAD,CAAf,CACD,CAED,QAASsB,iBAAT,CAA0B3C,IAA1B,CAAgC,CAC9BP,GAAG,CAACmD,cAAJ,CAAmB5C,IAAnB,EACCD,IADD,CACM,SAAAC,IAAI,CAAI,CACZJ,cAAc,CAACI,IAAD,CAAd,CACD,CAHD,EAICC,KAJD,CAIO,SAACC,GAAD,QAASC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAJP,EAKAwC,cAAc,GACf,EAED,QAASG,mBAAT,CAA4B7C,IAA5B,CAAkC,CAChCP,GAAG,CAACqD,YAAJ,CAAiB9C,IAAjB,EACCD,IADD,CACM,SAAAC,IAAI,CAAI,CACZJ,cAAc,CAACI,IAAD,CAAd,CACD,CAHD,EAICC,KAJD,CAIO,SAACC,GAAD,QAASC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAJP,EAKAwC,cAAc,GACf,CAED,QAASK,qBAAT,CAA8Bb,OAA9B,CAAuC,CACrCzC,GAAG,CAACuD,OAAJ,CAAYd,OAAZ,EACCnC,IADD,CACM,SAAAmC,OAAO,CAAI,CACf5B,QAAQ,EAAE4B,OAAF,4BAAc7B,KAAd,GAAR,CACD,CAHD,EAICJ,KAJD,CAIO,SAACC,GAAD,QAASC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAJP,EAKAwC,cAAc,GACf,CAED,mBACE,KAAC,kBAAD,CAAoB,QAApB,EAA6B,KAAK,CAAE/C,WAApC,uBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,KAAC,MAAD,IADF,cAEE,KAAC,IAAD,EACE,KAAK,CAAEU,KADT,CAEE,aAAa,CAAEmB,0BAFjB,CAGE,UAAU,CAAEC,uBAHd,CAIE,YAAY,CAAEG,yBAJhB,CAKE,WAAW,CAAEC,eALf,CAME,gBAAgB,CAAEH,yBANpB,CAOE,UAAU,CAAEI,cAPd,CAQE,YAAY,CAAES,gBARhB,EAFF,cAYE,KAAC,MAAD,EACE,IAAI,CAAE7B,WADR,EAZF,cAgBE,KAAC,gBAAD,EACE,MAAM,CAAEE,sBADV,CAEE,OAAO,CAAE8B,cAFX,CAGE,YAAY,CAAEC,gBAHhB,EAhBF,cAsBE,KAAC,aAAD,EACE,MAAM,CAAE7B,mBADV,CAEE,OAAO,CAAE4B,cAFX,CAGE,UAAU,CAAEK,oBAHd,EAtBF,cA4BE,KAAC,eAAD,EACE,IAAI,CAAE3B,YADR,CAEE,MAAM,CAAEJ,qBAFV,CAGE,OAAO,CAAE0B,cAHX,CAIE,YAAY,CAAEH,gBAJhB,EA5BF,cAmCE,KAAC,eAAD,EACE,MAAM,CAAErB,qBADV,CAEE,OAAO,CAAEwB,cAFX,CAGE,cAAc,CAAEG,kBAHlB,EAnCF,cAyCE,KAAC,UAAD,EACE,IAAI,CAAEzB,YADR,CAEE,MAAM,CAAEE,gBAFV,CAGE,OAAO,CAAEoB,cAHX,EAzCF,GADF,EADF,CAmDD,CAED,cAAehD,IAAf"},"metadata":{},"sourceType":"module"}