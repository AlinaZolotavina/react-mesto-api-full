{"ast":null,"code":"import _slicedToArray from\"C:/Users/\\u0410\\u043B\\u0438\\u043D\\u0430/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef,useEffect}from'react';import PopupWithForm from\"./PopupWithForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateAvatar=_ref.onUpdateAvatar,onValidation=_ref.onValidation;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),avatar=_useState2[0],setAvatar=_useState2[1];var _useState3=useState('Вы пропустили это поле.'),_useState4=_slicedToArray(_useState3,2),avatarError=_useState4[0],setAvatarError=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),inputAvatarClassName=_useState6[0],setInputAvatarClassName=_useState6[1];function handleAvatarChange(e){setAvatar(e.target.value);onValidation(e.target,setAvatarError,setInputAvatarClassName);}var inputRef=useRef(null);var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isFormValid=_useState8[0],setFormValid=_useState8[1];var _useState9=useState('button_inactive'),_useState10=_slicedToArray(_useState9,2),buttonClassName=_useState10[0],setButtonClassName=_useState10[1];useEffect(function(){if(avatarError){setFormValid(false);setButtonClassName('button_inactive');}else{setFormValid(true);setButtonClassName('');}},[avatarError]);function clearInput(){setAvatar('');setAvatarError('Вы пропустили это поле.');setInputAvatarClassName('');}function handleSubmit(e){e.preventDefault();onUpdateAvatar({avatar:inputRef.current.value});clearInput();}function handleClose(){onClose();clearInput();}return/*#__PURE__*/_jsx(PopupWithForm,{name:\"avatar-edit\",title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",formName:\"updateAvatar\",buttonText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",isOpen:isOpen,onClose:handleClose,onSubmit:handleSubmit,isFormValid:isFormValid,buttonClassName:buttonClassName,children:/*#__PURE__*/_jsxs(\"label\",{className:\"form__item\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form__input form__input_type_link\",id:\"avatar-link-input\",type:\"url\",name:\"avatar\",placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",required:true,value:avatar||'',onChange:handleAvatarChange,ref:inputRef}),/*#__PURE__*/_jsx(\"span\",{className:\"form__input-error avatar-link-input-error \".concat(inputAvatarClassName),children:avatarError})]})});}export default EditAvatarPopup;","map":{"version":3,"names":["React","useState","useRef","useEffect","PopupWithForm","EditAvatarPopup","isOpen","onClose","onUpdateAvatar","onValidation","avatar","setAvatar","avatarError","setAvatarError","inputAvatarClassName","setInputAvatarClassName","handleAvatarChange","e","target","value","inputRef","isFormValid","setFormValid","buttonClassName","setButtonClassName","clearInput","handleSubmit","preventDefault","current","handleClose"],"sources":["C:/Users/Алина/dev/mesto-react/src/components/EditAvatarPopup.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, onValidation }) {\r\n    const [avatar, setAvatar] = useState('');\r\n    const [avatarError, setAvatarError] = useState('Вы пропустили это поле.');\r\n    const [inputAvatarClassName, setInputAvatarClassName] = useState('');\r\n    function handleAvatarChange(e) {\r\n        setAvatar(e.target.value);\r\n        onValidation(e.target, setAvatarError, setInputAvatarClassName);\r\n    }\r\n\r\n    const inputRef = useRef(null);\r\n\r\n    const [isFormValid, setFormValid] = useState(false);\r\n    const [buttonClassName, setButtonClassName] = useState('button_inactive');\r\n    useEffect(() => {\r\n      if (avatarError) {\r\n        setFormValid(false);\r\n        setButtonClassName('button_inactive');\r\n      } else {\r\n        setFormValid(true);\r\n        setButtonClassName('')\r\n      }\r\n    }, [avatarError]);\r\n\r\n    function clearInput() {\r\n        setAvatar('');\r\n        setAvatarError('Вы пропустили это поле.');\r\n        setInputAvatarClassName('');\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onUpdateAvatar({\r\n            avatar: inputRef.current.value\r\n        });\r\n        clearInput();\r\n    }\r\n\r\n    function handleClose() {\r\n        onClose();\r\n        clearInput();\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name=\"avatar-edit\"\r\n            title=\"Обновить аватар\"\r\n            formName=\"updateAvatar\"\r\n            buttonText=\"Сохранить\"\r\n            isOpen={isOpen}\r\n            onClose={handleClose}\r\n            onSubmit={handleSubmit}\r\n            isFormValid={isFormValid}\r\n            buttonClassName={buttonClassName}\r\n        >\r\n            <label className=\"form__item\">\r\n                <input\r\n                    className=\"form__input form__input_type_link\"\r\n                    id=\"avatar-link-input\"\r\n                    type=\"url\"\r\n                    name=\"avatar\"\r\n                    placeholder=\"Ссылка на картинку\" \r\n                    required\r\n                    value={avatar || ''}\r\n                    onChange={handleAvatarChange}\r\n                    ref={inputRef}\r\n                />\r\n                <span className={`form__input-error avatar-link-input-error ${inputAvatarClassName}`}>{avatarError}</span>\r\n            </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n"],"mappings":"6IAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,CAAkCC,SAAlC,KAAmD,OAAnD,CACA,MAAOC,cAAP,KAA0B,iBAA1B,C,wFAEA,QAASC,gBAAT,MAA4E,IAAjDC,OAAiD,MAAjDA,MAAiD,CAAzCC,OAAyC,MAAzCA,OAAyC,CAAhCC,cAAgC,MAAhCA,cAAgC,CAAhBC,YAAgB,MAAhBA,YAAgB,CACxE,cAA4BR,QAAQ,CAAC,EAAD,CAApC,wCAAOS,MAAP,eAAeC,SAAf,eACA,eAAsCV,QAAQ,CAAC,yBAAD,CAA9C,yCAAOW,WAAP,eAAoBC,cAApB,eACA,eAAwDZ,QAAQ,CAAC,EAAD,CAAhE,yCAAOa,oBAAP,eAA6BC,uBAA7B,eACA,QAASC,mBAAT,CAA4BC,CAA5B,CAA+B,CAC3BN,SAAS,CAACM,CAAC,CAACC,MAAF,CAASC,KAAV,CAAT,CACAV,YAAY,CAACQ,CAAC,CAACC,MAAH,CAAWL,cAAX,CAA2BE,uBAA3B,CAAZ,CACH,CAED,GAAMK,SAAQ,CAAGlB,MAAM,CAAC,IAAD,CAAvB,CAEA,eAAoCD,QAAQ,CAAC,KAAD,CAA5C,yCAAOoB,WAAP,eAAoBC,YAApB,eACA,eAA8CrB,QAAQ,CAAC,iBAAD,CAAtD,0CAAOsB,eAAP,gBAAwBC,kBAAxB,gBACArB,SAAS,CAAC,UAAM,CACd,GAAIS,WAAJ,CAAiB,CACfU,YAAY,CAAC,KAAD,CAAZ,CACAE,kBAAkB,CAAC,iBAAD,CAAlB,CACD,CAHD,IAGO,CACLF,YAAY,CAAC,IAAD,CAAZ,CACAE,kBAAkB,CAAC,EAAD,CAAlB,CACD,CACF,CARQ,CAQN,CAACZ,WAAD,CARM,CAAT,CAUA,QAASa,WAAT,EAAsB,CAClBd,SAAS,CAAC,EAAD,CAAT,CACAE,cAAc,CAAC,yBAAD,CAAd,CACAE,uBAAuB,CAAC,EAAD,CAAvB,CACH,CAED,QAASW,aAAT,CAAsBT,CAAtB,CAAyB,CACrBA,CAAC,CAACU,cAAF,GACAnB,cAAc,CAAC,CACXE,MAAM,CAAEU,QAAQ,CAACQ,OAAT,CAAiBT,KADd,CAAD,CAAd,CAGAM,UAAU,GACb,CAED,QAASI,YAAT,EAAuB,CACnBtB,OAAO,GACPkB,UAAU,GACb,CAED,mBACI,KAAC,aAAD,EACI,IAAI,CAAC,aADT,CAEI,KAAK,CAAC,uFAFV,CAGI,QAAQ,CAAC,cAHb,CAII,UAAU,CAAC,wDAJf,CAKI,MAAM,CAAEnB,MALZ,CAMI,OAAO,CAAEuB,WANb,CAOI,QAAQ,CAAEH,YAPd,CAQI,WAAW,CAAEL,WARjB,CASI,eAAe,CAAEE,eATrB,uBAWI,eAAO,SAAS,CAAC,YAAjB,wBACI,cACI,SAAS,CAAC,mCADd,CAEI,EAAE,CAAC,mBAFP,CAGI,IAAI,CAAC,KAHT,CAII,IAAI,CAAC,QAJT,CAKI,WAAW,CAAC,oGALhB,CAMI,QAAQ,KANZ,CAOI,KAAK,CAAEb,MAAM,EAAI,EAPrB,CAQI,QAAQ,CAAEM,kBARd,CASI,GAAG,CAAEI,QATT,EADJ,cAYI,aAAM,SAAS,qDAA+CN,oBAA/C,CAAf,UAAuFF,WAAvF,EAZJ,GAXJ,EADJ,CA4BH,CAED,cAAeP,gBAAf"},"metadata":{},"sourceType":"module"}